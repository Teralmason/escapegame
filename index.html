<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Dodge Game</title>
<style>
  :root{
    --bg:#0f1226;
    --fg:#e8ebff;
    --accent:#7aa2ff;
    --danger:#ff4d6d;
    --ok:#34d399;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0}
  body{
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
    background: radial-gradient(1200px 800px at 50% -10%, #1a2050, #0b0d1c 70%), var(--bg);
    color:var(--fg);
    display:flex; align-items:center; justify-content:center;
    padding:16px;
  }
  .wrap{
    width:min(96vw, 560px);
  }
  h1{
    font-size:clamp(18px, 3.5vw, 22px);
    margin:0 0 8px;
    opacity:.85;
    letter-spacing:.3px;
  }
  .card{
    background:rgba(255,255,255,.03);
    border:1px solid rgba(255,255,255,.08);
    border-radius:16px;
    box-shadow: 0 10px 30px rgba(0,0,0,.35);
    padding:12px;
    backdrop-filter: blur(4px);
  }
  canvas{
    width:100%;
    height:auto;
    display:block;
    background:
      linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0)),
      #0a0f24;
    border-radius:12px;
    border:1px solid rgba(255,255,255,.08);
  }
  .hud{
    display:flex; justify-content:space-between; align-items:center;
    margin:10px 4px 8px;
    font-weight:600;
  }
  .badge{
    font-size:13px;
    padding:6px 10px;
    border-radius:999px;
    background:rgba(255,255,255,.06);
    border:1px solid rgba(255,255,255,.08);
  }
  .controls{
    display:flex; gap:10px; margin-top:10px;
  }
  .btn{
    flex:1;
    user-select:none;
    -webkit-user-select:none;
    text-align:center;
    padding:18px 12px; /* biraz daha b√ºy√ºk kutular */
    border-radius:16px;
    font-size:22px; /* b√ºy√ºtt√ºk */
    border:1px solid rgba(255,255,255,.12);
    background:rgba(255,255,255,.06);
    color:var(--fg);
    touch-action: manipulation;
  }
  .btn:active{transform:scale(.98)}
  .tip{
    text-align:center; opacity:.7; font-size:12px; margin-top:6px;
  }

  /* Slow motion g√∂rsel efekti */
  .slowmo{
    filter: saturate(1.2) contrast(1.15);
    animation: wobble 1.2s ease-in-out infinite alternate;
  }
  @keyframes wobble{
    from{ transform: scale(1) }
    to{ transform: scale(1.01) }
  }

  /* Modal / Overlay */
  .overlay{
    position:fixed; inset:0; display:none;
    align-items:center; justify-content:center;
    background: rgba(6,8,16,.65);
    backdrop-filter: blur(6px);
    z-index:50;
    padding:16px;
  }
  .overlay.show{ display:flex }
  .modal{
    width:min(92vw, 520px);
    background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
    border:1px solid rgba(255,255,255,.12);
    border-radius:18px;
    padding:16px;
    box-shadow: 0 10px 40px rgba(0,0,0,.45);
  }
  .modal h2{
    margin:4px 0 8px; font-size:clamp(18px, 4.6vw, 22px);
  }
  .modal p{ opacity:.9; margin:0 0 12px; line-height:1.5 }
  .row{ display:flex; gap:10px; margin-top:8px; flex-wrap:wrap }
  .btn-ghost, .btn-solid{
    padding:14px 18px; border-radius:16px; font-weight:700; border:1px solid transparent;
    cursor:pointer; color:var(--fg); font-size:18px;
  }
  .btn-ghost{
    background:rgba(255,255,255,.06); border-color:rgba(255,255,255,.12);
  }
  .btn-solid{
    background:linear-gradient(180deg, #8bc6ff, #5b8dff);
    color:#0b0d1c;
    text-shadow: 0 1px 0 rgba(255,255,255,.4);
  }

  /* Dev kalp */
  .heart-overlay{
    position:fixed; inset:0; display:none; align-items:center; justify-content:center;
    background: radial-gradient(800px 500px at 50% 30%, rgba(255, 0, 90,.25), rgba(0,0,0,.6));
    z-index:60;
  }
  .heart-overlay.show{ display:flex }
  .heart{
    font-size:min(40vw, 220px);
    animation: pop .9s ease-out, beat 1.8s ease-in-out infinite 1.1s;
    will-change: transform;
  }
  @keyframes pop{
    0%{ transform: scale(0); opacity:0 }
    70%{ transform: scale(1.1); opacity:1 }
    100%{ transform: scale(1) }
  }
  @keyframes beat{
    0%,100%{ transform: scale(1) }
    50%{ transform: scale(1.06) }
  }
</style>
</head>
<body>
  <div class="wrap">
    <h1>Dodge Game</h1>
    <div class="card">
      <div class="hud">
        <div class="badge" id="scoreBadge">Skor: 0</div>
        <div class="badge">Saƒü/sol ile ka√ß!</div>
      </div>
      <canvas id="game" width="420" height="620" aria-label="Dodge Game"></canvas>
      <div class="controls" aria-hidden="false">
        <button class="btn" id="leftBtn"  aria-label="Sola hareket">‚óÄ</button>
        <button class="btn" id="rightBtn" aria-label="Saƒüa hareket">‚ñ∂</button>
      </div>
      <div class="tip">Bilgisayar: ‚Üê ‚Üí | Mobil: butonlara basƒ±lƒ± tut</div>
    </div>
  </div>

  <!-- Modal / Teklif -->
  <div class="overlay" id="overlay">
    <div class="modal" id="modalIntro">
      <h2>Geli≈ütiriciden mesaj var üíå</h2>
      <p>√ñnemli bi≈üeydir belki bi bak</p>
      <div class="row">
        <button class="btn-solid" id="seeMessage">Mesajƒ± G√∂r</button>
      </div>
    </div>

    <div class="modal" id="modalAsk" style="display:none">
      <h2>Benimle √ßƒ±kar mƒ±sƒ±n bebss ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</h2>
      <p id="noText">√áok ciddiyim kiz valla</p>
      <div class="row">
        <button class="btn-solid" id="yesBtn">Evet</button>
        <button class="btn-ghost" id="noBtn">Hayƒ±r</button>
      </div>
    </div>
  </div>

  <!-- Kocaman Kalp -->
  <div class="heart-overlay" id="heartOverlay">
    <div class="heart" aria-live="polite" aria-label="Kalp">‚ù§Ô∏è</div>
  </div>

<script>
(()=>{

  /*** Canvas ve boyutlandƒ±rma ***/
  const canvas = document.getElementById('game');
  const ctx = canvas.getContext('2d');
  const scoreEl = document.getElementById('scoreBadge');

  function fitCanvas(){ }
  window.addEventListener('resize', fitCanvas);
  fitCanvas();

  /*** Oyun durumlarƒ± ***/
  let player = { x: canvas.width/2 - 18, y: canvas.height - 70, w: 36, h: 36, speed: 260 };
  let obstacles = [];
  let spawnTimer = 0;
  let spawnEvery = 0.8;
  let baseFall = 140;
  let running = true;
  let score = 0;
  let moveLeft = false, moveRight = false;
  let slowTriggered = false, slowStart = 0, slowDuration = 1500, speedFactor = 1;

  function resetGame(){
    player.x = canvas.width/2 - player.w/2;
    obstacles = [];
    spawnTimer = 0;
    score = 0;
    running = true;
    slowTriggered = false;
    speedFactor = 1;
    canvas.classList.remove('slowmo');
    updateScoreUI();
  }
  function updateScoreUI(){ scoreEl.textContent = `Skor: ${score}`; }

  const rand = (min, max)=> Math.random()*(max-min)+min;
  function hit(a,b){ return !(a.x+a.w < b.x || a.x > b.x+b.w || a.y+a.h < b.y || a.y > b.y+b.h); }

  // Klavye
  window.addEventListener('keydown', (e)=>{
    if(e.key==='ArrowLeft'|| e.key==='a') moveLeft=true;
    if(e.key==='ArrowRight'|| e.key==='d') moveRight=true;
    if(!running && e.key==='r') resetGame();
  });
  window.addEventListener('keyup', (e)=>{
    if(e.key==='ArrowLeft'|| e.key==='a') moveLeft=false;
    if(e.key==='ArrowRight'|| e.key==='d') moveRight=false;
  });

  // Mobil butonlarƒ±
  const leftBtn = document.getElementById('leftBtn');
  const rightBtn = document.getElementById('rightBtn');
  const startHold = side=> { if(side==='L') moveLeft=true; if(side==='R') moveRight=true; };
  const endHold = side=> { if(side==='L') moveLeft=false; if(side==='R') moveRight=false; };
  ['mousedown','touchstart'].forEach(evt=>{
    leftBtn.addEventListener(evt, ()=>startHold('L'), {passive:true});
    rightBtn.addEventListener(evt, ()=>startHold('R'), {passive:true});
  });
  ['mouseup','mouseleave','touchend','touchcancel'].forEach(evt=>{
    leftBtn.addEventListener(evt, ()=>endHold('L'));
    rightBtn.addEventListener(evt, ()=>endHold('R'));
  });

  // Oyun d√∂ng√ºs√º
  let last = performance.now();
  function loop(t){
    const dt = Math.min(0.033, (t - last)/1000);
    last = t;
    if(running){
      if(slowTriggered){
        const elapsed = t - slowStart;
        const k = Math.max(0,1-elapsed/slowDuration);
        speedFactor = k*k;
        if(speedFactor<=0.02){ speedFactor=0; running=false; setTimeout(showIntroModal,350); }
      }
      update(dt*speedFactor);
    }
    render();
    requestAnimationFrame(loop);
  }

  function update(dt){
    let vx=0;
    if(moveLeft) vx-=1;
    if(moveRight) vx+=1;
    player.x += vx*player.speed*dt;
    player.x = Math.max(6, Math.min(canvas.width-player.w-6, player.x));

    spawnTimer += dt;
    const dynamicEvery = Math.max(0.38, spawnEvery-score*0.03);
    if(spawnTimer>=dynamicEvery){
      spawnTimer=0;
      const w = rand(30,90);
      const x = rand(6, canvas.width-w-6);
      const speed = baseFall+rand(0,120)+score*6;
      obstacles.push({x,y:-20,w,h:rand(14,26),vy:speed,passed:false});
    }

    for(const o of obstacles){
      o.y+=o.vy*dt;
      if(!slowTriggered && hit(player,o)){ flashCanvas(); resetGame(); return; }
      if(!o.passed && o.y>canvas.height){ o.passed=true; score+=1; updateScoreUI(); if(score>=10 && !slowTriggered) triggerSlowmo(); }
    }
    if(obstacles.length>80) obstacles = obstacles.filter(o=>o.y<canvas.height+80);
  }

  function render(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.globalAlpha=0.08;
    ctx.fillStyle='#ffffff';
    for(let i=0;i<10;i++){
      const y=((i*80)+(performance.now()/20))%(canvas.height+80)-80;
      ctx.fillRect(0,y,canvas.width,1);
    }
    ctx.globalAlpha=1;
    for(const o of obstacles){
      const grd = ctx.createLinearGradient(o.x,o.y,o.x,o.y+o.h);
      grd.addColorStop(0,'rgba(122,162,255,0.95)');
      grd.addColorStop(1,'rgba(90,130,255,0.85)');
      ctx.fillStyle=grd;
      roundRect(ctx,o.x,o.y,o.w,o.h,6);
      ctx.fill();
    }
    ctx.fillStyle='#34d399';
    roundRect(ctx,player.x,player.y,player.w,player.h,8);
    ctx.fill();
    ctx.globalAlpha=.08;
    ctx.fillStyle='#ffffff';
    ctx.font='bold 120px system-ui, sans-serif';
    ctx.textAlign='center';
    ctx.fillText(score.toString(),canvas.width/2,canvas.height/2+40);
    ctx.globalAlpha=1;
  }

  function roundRect(ctx,x,y,w,h,r){
    r=Math.min(r,w/2,h/2);
    ctx.beginPath();
    ctx.moveTo(x+r,y);
    ctx.arcTo(x+w,y,x+w,y+h,r);
    ctx.arcTo(x+w,y+h,x,y+h,r);
    ctx.arcTo(x,y+h,x,y,r);
    ctx.arcTo(x,y,x+w,y,r);
    ctx.closePath();
  }

  function flashCanvas(){
    canvas.style.transition='none';
    canvas.style.boxShadow='0 0 0 2px rgba(255,77,109,.7) inset';
    setTimeout(()=>{ canvas.style.transition='box-shadow .3s ease'; canvas.style.boxShadow='0 0 0 0 rgba(0,0,0,0) inset'; },40);
  }

  function triggerSlowmo(){
    slowTriggered=true;
    slowStart=performance.now();
    canvas.classList.add('slowmo');
  }

  // Modal / Teklif
  const overlay=document.getElementById('overlay');
  const modalIntro=document.getElementById('modalIntro');
  const modalAsk=document.getElementById('modalAsk');
  const seeMessage=document.getElementById('seeMessage');
  const yesBtn=document.getElementById('yesBtn');
  const noBtn=document.getElementById('noBtn');
  const heartOverlay=document.getElementById('heartOverlay');
  const noText=document.getElementById('noText');

  seeMessage.addEventListener('click',()=>{
    modalIntro.style.display='none';
    modalAsk.style.display='';
  });

  let noClickCount=0;
  const noMessages=[
    "√áok ciddiyim valla",
    "Evete tƒ±klasana",
    "Kƒ±z hadi",
    "Cevap evet biliyorum bas hadi",
    "Dalga mƒ± ge√ßiyon kƒ±z",
    "Bu i≈üin tadƒ± ka√ßtƒ± Muhsin",
    "Evete basmanƒ± bekliyorum",
    "Uzatma hadi da"
  ];

  // "Hayƒ±r" tƒ±klanƒ±nca
  let yesScale=1.0;
  noBtn.addEventListener('click',()=>{
    if(noClickCount<noMessages.length){
      noText.textContent=noMessages[noClickCount];
      noClickCount++;
    }
    yesScale=Math.min(6.2, yesScale+0.25);
    yesBtn.style.transform=`scale(${yesScale})`;
  });

  // "Evet" tƒ±klanƒ±nca dev kalp
  yesBtn.addEventListener('click',()=>{
    overlay.classList.remove('show');
    heartOverlay.classList.add('show');
  });

  function showIntroModal(){ overlay.classList.add('show'); modalIntro.style.display=''; modalAsk.style.display='none'; }

  requestAnimationFrame(loop);

})();
</script>
</body>
</html>



